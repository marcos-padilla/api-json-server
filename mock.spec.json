{
  "version": 1,
  "settings": {
    "delayMs": 0,
    "errorRate": 0,
    "errorStatus": 503,
    "errorResponse": { "error": "Service temporarily unavailable" }
  },
  "endpoints": [
    {
      "method": "GET",
      "path": "/users/:id",
      "status": 200,
      "response": {
        "id": "{{params.id}}",
        "type": "{{query.type}}",
        "message": "User lookup ok"
      }
    },
    {
      "method": "GET",
      "path": "/search",
      "status": 200,
      "match": { "query": { "type": "premium" } },
      "response": {
        "ok": true,
        "filter": "{{query.type}}",
        "results": [
          { "id": "u1", "tier": "premium" },
          { "id": "u2", "tier": "premium" }
        ]
      }
    },
    {
      "method": "POST",
      "path": "/echo",
      "status": 201,
      "response": {
        "receivedEmail": "{{body.email}}",
        "receivedName": "{{body.name}}",
        "rawBody": "{{body}}"
      }
    },
    {
      "method": "POST",
      "path": "/login",
      "status": 200,
      "response": { "ok": true, "message": "Default login response" },
      "variants": [
        {
          "name": "invalid password",
          "match": { "body": { "password": "wrong" } },
          "status": 401,
          "response": { "ok": false, "error": "Invalid credentials" }
        },
        {
          "name": "admin login",
          "match": { "body": { "email": "admin@example.com" } },
          "status": 200,
          "response": { "ok": true, "role": "admin", "token": "tok_{{body.email}}" }
        }
      ]
    }
  ]
}
